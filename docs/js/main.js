const u=document.querySelector(".js-search"),S=document.querySelector(".js-searchBtn"),g=document.querySelectorAll(".js-resetBtn"),m=document.querySelector(".js-favSection"),l=document.querySelector(".js-resultSection");let o=[],r=[],h="";const a=(t,n)=>{n.innerHTML="";for(const e of t){const s=document.createElement("article");s.setAttribute("class","result__section--series js-serie"),s.setAttribute("id",e.mal_id),n.appendChild(s);const c=document.createElement("img");s.appendChild(c),e.images.webp.image_url==="https://cdn.myanimelist.net/img/sp/icon/apple-touch-icon-256.png"?c.setAttribute("src","https://placehold.co/210x295/c1c1c3/666666/?text=Imagen+no+encontrada"):c.setAttribute("src",e.images.webp.image_url),c.setAttribute("alt",e.title);const p=document.createElement("h4");s.appendChild(p);const v=document.createTextNode(e.title);if(p.appendChild(v),r.findIndex(i=>i.mal_id===e.mal_id)!==-1&&s.classList.add("favorite"),t===r||t===d){s.setAttribute("class","fav__section--series");const i=document.createElement("span"),f=document.createTextNode("X");i.setAttribute("class","quitList js-remove"),s.appendChild(i),i.appendChild(f)}}_()},A=t=>{t.preventDefault(),fetch(`${h}`).then(n=>n.json()).then(n=>{o=n.data,a(o,l)}).catch(n=>console.log("Error",n))};S.addEventListener("click",A);const E=()=>{h=`https://api.jikan.moe/v4/anime?q=${u.value}`};u.addEventListener("input",E);const I=t=>{const n=parseInt(t.currentTarget.id),e=o.find(c=>n===c.mal_id),s=r.findIndex(c=>c.mal_id===n);s===-1?r.push(e):r.splice(s,1),localStorage.setItem("favorites",JSON.stringify(r)),a(r,m),a(o,l)},y=t=>{const n=t.currentTarget.parentNode,e=parseInt(n.id),s=r.findIndex(c=>c.mal_id===e);r.splice(s,1),localStorage.setItem("favorites",JSON.stringify(r)),a(r,m),a(o,l)},_=()=>{document.querySelectorAll(".js-serie").forEach(e=>e.addEventListener("click",I)),document.querySelectorAll(".js-remove").forEach(e=>e.addEventListener("click",y))},j=t=>{const e=t.currentTarget.parentNode;m.innerHTML="",r=[],localStorage.removeItem("favorites"),a(o,l),e.id==="headerContainer"&&(l.innerHTML="",u.value="")};g.forEach(t=>t.addEventListener("click",j));const d=JSON.parse(localStorage.getItem("favorites"));d?(r=[...d],a(d,m)):console.log("No hay datos en el LocalStorage");
//# sourceMappingURL=main.js.map
